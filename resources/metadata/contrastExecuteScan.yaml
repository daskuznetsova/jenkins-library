metadata:
  name: contrastExecuteScan
  description: This step executes a contrast scan on the specified project.
  longDescription: |-
    This step executes a contrast scan on the specified project.

spec:
  inputs:
    params:
      - name: userApiKey
        description: "User API Key for Contrast in plain text. NEVER set this parameter in a file commited to a source code repository. This parameter is intended to be used from the command line or set securely via the environment variable listed below. In most pipeline use-cases, you should instead either store the token in Vault (where it can be automatically retrieved by the step from one of the paths listed below) or store it as a Jenkins secret and configure the secret's id via the `userApiKeyCredentialsId` parameter."
        scope:
          - GENERAL
          - PARAMETERS
          - STAGES
          - STEPS
        type: string
        secret: true
        aliases:
          - name: api_key
        resourceRef:
          - name: userApiKeyCredentialsId
            type: secret
          - type: vaultSecret
            default: contrast
            name: userApiKey
      - name: serviceKey
        description: "Service Key for Contrast in plain text. NEVER set this parameter in a file commited to a source code repository. This parameter is intended to be used from the command line or set securely via the environment variable listed below. In most pipeline use-cases, you should instead either store the token in Vault (where it can be automatically retrieved by the step from one of the paths listed below) or store it as a Jenkins secret and configure the secret's id via the `serviceKeyCredentialsId` parameter."
        scope:
          - GENERAL
          - PARAMETERS
          - STAGES
          - STEPS
        type: string
        secret: true
        aliases:
          - name: service_key
        resourceRef:
          - name: serviceKeyCredentialsId
            type: secret
          - type: vaultSecret
            default: contrast
            name: serviceKey
      - name: username
        description: "User name for Contrast in plain text."
        scope:
          - GENERAL
          - PARAMETERS
          - STAGES
          - STEPS
        type: string
        secret: true
        resourceRef:
          - name: userCredentialsId
            type: secret
          - type: vaultSecret
            default: contrast
            name: username
      - name: server
        type: string
        description: "Contrast server url."
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        default: "cs003.contrastsecurity.com"
      - name: organizationId
        type: string
        description: "Organization Id in Contrast."
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
        default: "53980ebc-de2c-4e0a-b138-f61cb843f861"
      - name: applicationId
        type: string
        description: "Application Id in Contrast."
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
